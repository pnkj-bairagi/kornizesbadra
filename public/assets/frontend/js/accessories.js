/*
	Minified accessories.js
	Last Modified: Fri, 29 Oct 2021 14:40:46 GMT
*/
function accessory_switch(id){var id_group;switch(id){case'backing':id_group=['width_int','width_frac','height_int','height_frac'];break;case'cover':id_group=['cover_id','width_int','width_frac','height_int','height_frac'];break;case'frame-only':id_group=['profile_id','color_id','width_int','width_frac','height_int','height_frac'];break;case'frame-rail-pair':id_group=['profile_id','color_id','width_int','width_frac'];break;case'print':id_group=['outside_width_int','outside_width_frac','outside_height_int','outside_height_frac','print_width_int','print_width_frac','print_height_int','print_height_frac'];break;default:id_group=['accessory_id'];}
return id_group;}
function get_data_value(row,ids){var params_object={};var row_id=row.prop('id');params_object.item_type_id=row.find('input[name=item_type_id]').val();if(row_id=='backing')params_object.backing_id=2;if(row_id=='frame-only'){params_object.cover_id=4;params_object.backing_id=5;}
if(row_id=='print')params_object.backing_id=2;ids.forEach(function(id){if(id=='accessory_id'){params_object[id]=row.find('input[name="accessory_id"]').val();return true;}
params_object[id]=row.find('select[name='+id+']').val();});return params_object;}
$('.accessory-row').on('change',function(){var accessory_row=$(this);var accessory_row_id=accessory_row.prop('id');var params={};var id_group=false;id_group=accessory_switch(accessory_row_id);params=get_data_value(accessory_row,id_group);var quantity=accessory_row.find('select[name=quantity]').val();$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",data:{action:'update_accessory_price',params:params,quantity:quantity},error:function(){alert("We can't get the price for this accessory. Sorry for the inconvenience!");return false;},success:function(result){if(accessory_row_id=='frame-only'||accessory_row_id=='frame-rail-pair'){var current_color=accessory_row.find('select[name=color_id]').val();accessory_row.find('select[name=color_id]').empty();jQuery.each(result.details.colors,function(index,item){accessory_row.find('select[name=color_id]').append('<option value="'+index+'">'+item+'</option>');});accessory_row.find('select[name=color_id]').find('option[value='+current_color+']').attr('selected','selected');}
accessory_row.find('span.price-text').html(result.price);if(!result.valid){disableAddToCartButton(accessory_row_id);if(accessory_row_id=='frame-only'){if(accessory_row.find('select[name=profile_id]').val()==7){accessory_row.find('.accessory-error').html('Wood frames are only available up to 42" x 42".');accessory_row.find('.accessory-image img').attr('src',SITE_URL+result.details.cart_image_url);}else{accessory_row.find('.accessory-error').html('Metal frames are only available up to 42" x 62".');accessory_row.find('.accessory-image img').attr('src',SITE_URL+result.details.cart_image_url);}}
accessory_row.find('.accessory-error').slideDown('fast');}
else{enableAddToCartButton(accessory_row_id);accessory_row.find('.accessory-error').slideUp('fast');switch(accessory_row_id){case'backing':accessory_row.find('.accessory-image img').attr('src',SITE_URL+'/images/cart/backings/'+params.backing_id+'.jpg');break;case'cover':accessory_row.find('.accessory-image img').attr('src',SITE_URL+'/images/cart/covers/'+params.cover_id+'.jpg');break;case'frame-only':accessory_row.find('.accessory-image img').attr('src',SITE_URL+result.details.cart_image_url);break;case'frame-rail-pair':accessory_row.find('.accessory-image img').attr('src',SITE_URL+result.details.cart_image_url);break;}}
return true;}});});$('.reset-image-upload').on('click',function(){$('.selection-tile.pick-a-photo .fileinput-button').removeClass('disabled');$('#fileupload-desktop').removeAttr('disabled');$('.image-upload-wrapper').slideDown();$('.image-upload-wrapper .progress').hide();$('.image-uploaded-wrapper').slideUp();$(".print-preview").attr("src","");$('.after-picked').each(function(){if($(this).is(':visible')){$(this).slideUp();}
else{$(this).css('display','none');}});$('.print-text').html('None');$('.after-picked').find('.image img').attr('src','');$('.before-picked').slideDown();$('.image-upload-wrapper').slideDown();$('#fileupload-desktop').empty();disableAddToCartButton('print');});$('.add-to-cart-button').on('click',function(){if($(this).attr('disabled')=='disabled')return;var params={};var id_group=false;var image=false;var accessory_row=$(this).closest('.accessory-row');var accessory_row_id=accessory_row.prop('id');id_group=accessory_switch(accessory_row_id);params=get_data_value(accessory_row,id_group);if(accessory_row_id=='print'){image=accessory_row.find('input[name=filename]').val();}
var quantity=accessory_row.find('select[name=quantity]').val();var item_image=(!accessory_row.is('#print'))?accessory_row.find('img').attr('src'):'uploads/frame-builder-thumbs/'+image;var item_quantity=accessory_row.find('.accessory-quantity').val();var item_price=accessory_row.find('.price-text').html();var data={action:'add_accessory_to_cart',params:params,quantity:quantity};if(image){data['image']=image;}
$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",data:data,error:function(){alert("We can't add this accessory to your cart. Sorry for the inconvenience!");return false;},success:function(result){console.log(result);if(result.success==false){alert("We can't add this accessory to your cart. Sorry for the inconvenience!");return;}
if(result.item_type_id==26||result.item_type_id==29){$('.continue-shopping').html('Design Another');}else{$('.continue-shopping').html('Continue Shopping')}
$('#added-to-cart-modal .item-image').html('<img src="'+item_image+'">');$('#added-to-cart-modal .item-name').html(result.item_name);var item_description_html='';$.each(result.item_attributes,function(key,value){item_description_html+=key+': '+value+'<br>';});$('#added-to-cart-modal .item-description').html(item_description_html);$('#added-to-cart-modal .item-quantity').html(item_quantity);$('#added-to-cart-modal .item-price').html(item_price);$('#added-to-cart-modal .coupon-asterisk-wrapper').toggle(result.item_discount);$('#added-to-cart-modal .cart-items').html(result.cart_items);$('#added-to-cart-modal .cart-subtotal').html(parseFloat(result.cart_subtotal).toFixed(2));$('.cart-item-count').html(result.cart_items);if(result.cart_items>0){$('.cart-item-count').addClass('in-cart');}
else{$('.cart-item-count').removeClass('in-cart');}
$('#added-to-cart-modal').modal('show');if(location.hostname=='www.frameiteasy.com')addFBPixel('AddToCart');return true;}});});function disableAddToCartButton(accessory_tag){var button=$('#'+accessory_tag+' .add-to-cart-button');button.css('opacity','0.5');button.css('cursor','default');button.attr('disabled',true);}
function enableAddToCartButton(accessory_tag){var button=$('#'+accessory_tag+' .add-to-cart-button');button.tooltip('hide');button.tooltip('destroy');button.css('opacity','1');button.data('toggle','');button.data('placement','');button.css('cursor','pointer');button.attr('title','');button.removeAttr('disabled');}
var map={17:false,72:false};$(document).keydown(function(e){if(e.keyCode in map){map[e.keyCode]=true;if(map[17]&&map[72]){var hidden_rows=$('#hidden-rows');if(hidden_rows.css('display')=='block'){$("html, body").clearQueue();$("html, body").animate({scrollTop:0},500);setTimeout(function(){hidden_rows.css('display','none');},500);}
else{hidden_rows.css('display','block');$("html, body").clearQueue();$("html, body").animate({scrollTop:hidden_rows.offset().top},500);}}}}).keyup(function(e){if(e.keyCode in map){map[e.keyCode]=false;}});$(function(){'use strict';var url=SITE_URL+'/uploads/',uploadButton=$('<button/>').addClass('btn btn-primary').prop('disabled',true).text('Processing...').on('click',function(){var $this=$(this),data=$this.data();$this.off('click').text('Abort').on('click',function(){$this.remove();data.abort();});data.submit().always(function(){$this.remove();});});$('#fileupload-desktop').fileupload({url:url,dataType:'json',autoUpload:true,acceptFileTypes:/(\.|\/)(jpe?g|png|hei[cf])$/i,maxFileSize:200000000,maxNumberOfFiles:1,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),previewMaxWidth:100,previewMaxHeight:100,previewCrop:true}).on('fileuploadadd',function(e,data){data.context=$('<div/>').appendTo('#files');$.each(data.files,function(index,file){if($('#print').find('.accessory-error').is(':visible')){$('#print').find('.accessory-error').html('');$('#print').find('.accessory-error').slideUp('fast');}
var node=$('<p/>').append($('<span/>').text(file.name));$('.image-upload-wrapper .progress').slideDown();});}).on('fileuploadprocessalways',function(e,data){var index=data.index,file=data.files[index],node=$(data.context.children()[index]);if(file.error){$('#progress').hide();alert('Please make sure the photo you select is in JPG, PNG, or GIF format. If you have any questions about picking a photo to print, don\'t hesitate to reach out to us using the contact info at the bottom of our website!');node.append('<br>').append($('<span class="text-danger"/>').text(file.error));}
if(index+1===data.files.length){data.context.find('button').text('Upload').prop('disabled',!!data.files.error);}}).on('fileuploadprogressall',function(e,data){var progress=parseInt(data.loaded/data.total*100,10);$('#progress .progress-bar').css('width',progress+'%');}).on('fileuploaddone',function(e,data){$.each(data.result.files,function(index,file){if(file.url){var link=$('<a>').attr('target','_blank').prop('href',file.url);$(data.context.children()[index]).wrap(link);}else if(file.error){disableAddToCartButton('print');$('#print').find('.accessory-error').html(file.error);$('#print').find('.accessory-error').slideDown('fast');$('.image-upload-wrapper .progress').slideUp();return false;}
$(".print-preview").attr("src",file.name);$("input[name=filename]").val(file.name);file.url=file.url.replace("-temp/","-medium/");$('.image-uploaded-wrapper img').attr('src',file.url);$('.pick-a-photo .before-picked').slideUp();$('.pick-a-photo .after-picked').slideDown();$('.print-text').html('Yes');$('.pick-a-photo .after-picked').css('overflow','visible');$('.pick-a-photo .after-picked .image img').hide();$('.pick-a-photo .after-picked .image').css('border','white solid 2px');$('.pick-a-photo .after-picked .image').css('width','100%');enableAddToCartButton('print');var preload=[file.url];var promises=[];for(var i=0;i<preload.length;i++){(function(url,promise){var img=new Image();img.onload=function(){promise.resolve();};img.src=url;})(preload[i],promises[i]=$.Deferred());}
$.when.apply($,promises).done(function(){$('.pick-a-photo .after-picked .image img').attr('src',file.url);$('.pick-a-photo .after-picked .image img').show();});setTimeout(function(){$('#progress .progress-bar').css('width',0);},1500);});}).on('fileuploadfail',function(e,data){$.each(data.files,function(index){var error=$('<span class="text-danger"/>').text('File upload failed.');$(data.context.children()[index]).append('<br>').append(error);});disableAddToCartButton('print');}).prop('disabled',!$.support.fileInput).parent().addClass($.support.fileInput?undefined:'disabled');});$(window).load(function(){var url=window.location.href;var matches=url.match(/\/accessories\/[0-9a-z-A-Z-_]+/);if(matches){var result=matches[0];var anchor=result.replace("/accessories/","");$('html, body').animate({scrollTop:$('#'+anchor).offset().top-80},500);}});