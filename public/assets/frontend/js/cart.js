/*
	Minified cart.js
	Last Modified: Fri, 29 Oct 2021 14:40:46 GMT
*/
function refreshTotals(error){$.ajax({type:"POST",url:SITE_URL+"/ajax_smarty.php",dataType:"html",timeout:5000,async:true,data:{'page':'cart_totals'},success:function(result){$('.cart-totals-wrapper').html(result);var sum=0;$('.cart-item-row.active .cart-quantity-input').each(function(){sum+=parseInt($(this).val(),10);});$('#site-header .cart-item-count').text(sum);if(sum==0){$('#site-header .cart-item-count').removeClass('in-cart');}
updateLocalStorageCartCount();var shipping_zip_field=$('.cart-totals-wrapper').find('input[name=shipping_zip]');$('.cart-totals-wrapper').find('.has-popover').popover({html:true});if(typeof error!==typeof undefined){$('.cart-totals-shipping-error').html(error).slideDown('fast');}}});}
$(document).ready(function(){refreshTotals();});$('.cart-totals-wrapper').on('keyup','input[name=shipping_zip]',function(){var shipping_zip_input=$('.cart-totals-wrapper').find('input[name=shipping_zip]');var get_estimate_button=$('.cart-totals-wrapper').find('.get-estimate-button');if(shipping_zip_input.val().length<5){get_estimate_button.attr('disabled',true);}
else{get_estimate_button.removeAttr('disabled');}});$(document).ready(function(){$('.cart-totals-wrapper').find('input[name=shipping_zip]').trigger('keyup');});var update_shipping_request=false;function updateShipping(){if(update_shipping_request){update_shipping_request.abort();update_shipping_request=false;}
$('.cart-totals-wrapper').find('.cart-totals-value').html('<i class="fas fa-spinner spin" aria-hidden="true"></i>');$('.cart-totals-wrapper').find('.cart-totals-shipping-error').hide();update_shipping_request=$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",timeout:15000,data:{'action':'get_cart_shipping','zip':$('.cart-totals-wrapper').find('input[name=shipping_zip]').val()},success:function(result){update_shipping_request=false;if(result.rate>0){refreshTotals();}
else{refreshTotals(error='We couldn\'t get shipping rates to this ZIP code - are you sure it\'s valid?<br>If you need help, please give us a call at '+SUPPORT_PHONE_NUMBER+'!');}},error:function(x,t,m){refreshTotals(error='We couldn\'t get shipping rates to this ZIP code - are you sure it\'s valid?<br>If you need help, please give us a call at '+SUPPORT_PHONE_NUMBER+'!');}});}
$('.cart-totals-wrapper').on('click','.get-estimate-button',function(){var attr=$(this).attr('disabled');if(typeof attr==typeof undefined||attr==false){$('.cart-totals-wrapper').find('input[name=shipping_zip]').attr('disabled',true);updateShipping();}});$('.cart-totals-wrapper').on('click','.reset-cart-shipping',function(){$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",timeout:15000,data:{'action':'reset_cart_shipping'},success:function(result){refreshTotals();}});});$('.share-cart-button').on('click',function(){$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",timeout:15000,data:{'action':'update_order_in_progress_id'}});});var update_item_quantity_request=false;function updateCartItemQuantity(item_key,quantity){if(update_item_quantity_request){update_item_quantity_request.abort();update_item_quantity_request=false;}
update_item_quantity_request=$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",timeout:5000,data:{'action':'update_cart_item_quantity','item_key':item_key,'quantity':quantity},success:function(result){refreshTotals();}});}
function addCommas(nStr){nStr+='';var x=nStr.split('.');var x1=x[0];var x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;}
var quantity_input_delay;$('.cart-quantity-input').on('keyup',function(e){var quantity_input=$(this);var quantity=parseInt(quantity_input.val());var item_row=quantity_input.closest('.cart-item-row');var item_cost=parseFloat(item_row.find('.item-cost').html().replace('$',''));if(isNaN(quantity_input.val())||quantity_input.val()<0){item_row.find('.cart-quantity').find('.remove-cart-item').css('color','#bbb');item_row.find('.cart-quantity').addClass('has-error');return;}
$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",timeout:15000,data:{'action':'reset_cart_shipping',quantity:quantity},success:function(result){$('.cart-totals-wrapper').find('.cart-totals-value').html('<i class="fas fa-spinner spin" aria-hidden="true"></i>');clearTimeout(quantity_input_delay);quantity_input_delay=setTimeout(function(){if($.isNumeric(quantity)&&(Math.floor(quantity)==quantity)&&(quantity>0)){item_row.find('.cart-quantity').removeClass('has-error');item_row.find('.cart-quantity').find('.remove-cart-item').css('color','#bbb');updateCartItemQuantity(quantity_input.data('item-key'),quantity);item_row.find('.total-cost').html('$'+addCommas((item_cost*quantity).toFixed(2)));}
else if(parseInt(quantity)===0){item_row.find('.cart-quantity').find('.remove-cart-item').css('color','#e80000');item_row.find('.cart-quantity').addClass('has-error');}
else{item_row.find('.cart-quantity').find('.remove-cart-item').css('color','#bbb');item_row.find('.cart-quantity').addClass('has-error');}},1000);}});});$('.remove-cart-item').on('click',function(){var item_key=$(this).data('item-key');var item_row=$(this).closest('.row');var item_row_hr=item_row.next('hr');$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",timeout:15000,data:{'action':'reset_cart_shipping'},success:function(result){item_row.removeClass('active');updateCartItemQuantity(item_key,0);item_row.slideUp(500);item_row_hr.slideUp(500);setTimeout(function(){item_row.remove();item_row_hr.remove();},500);}});});renderAllFramePreviews();