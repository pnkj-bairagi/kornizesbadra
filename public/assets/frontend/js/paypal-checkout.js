/*
	Minified paypal-checkout.js
	Last Modified: Mon, 08 Nov 2021 15:57:23 GMT
*/
braintree.client.create({authorization:paypal_authorization},function(clientErr,clientInstance){if(clientErr){console.error('Error creating client:',clientErr);return;}
braintree.paypalCheckout.create({client:clientInstance},function(paypalCheckoutErr,paypalCheckoutInstance){if(paypalCheckoutErr){console.error('Error creating PayPal Checkout:',paypalCheckoutErr);return;}
if($('#paypal-button').length){paypal.Button.render({env:(paypal_authorization.indexOf('sandbox')!==-1)?'sandbox':'production',commit:false,style:{size:'responsive',color:'gold',height:44,shape:'rect',label:'checkout',tagline:'false'},funding:{disallowed:[paypal.FUNDING.VENMO]},payment:function(){return paypalCheckoutInstance.createPayment({flow:'checkout',amount:total_due,currency:'USD',enableShippingAddress:true,shippingAddressEditable:false});},onAuthorize:function(data,actions){return paypalCheckoutInstance.tokenizePayment(data,function(err,payload){if(err){switch(err.code){case'PAYPAL_POPUP_CLOSED':console.error('Customer closed PayPal popup.');break;case'PAYPAL_ACCOUNT_TOKENIZATION_FAILED':console.error('PayPal tokenization failed. See details:',err.details);break;case'PAYPAL_FLOW_FAILED':console.error('Unable to initialize PayPal flow. Are your options correct?',err.details);break;default:console.error('Error!',err);}}else{$.ajax({type:"POST",url:SITE_URL+"/ajax.php",dataType:"json",timeout:15000,data:{'action':'digital_wallet','method':'PayPal','nonce':payload.nonce,'email':payload.details.email,'phone':payload.details.phone,'paymentToken':data.paymentToken,'payerID':payload.details.payerId,'address':{'firstName':payload.details.firstName,'lastName':payload.details.lastName,'streetAddress':payload.details.shippingAddress.line1,'extendedAddress':payload.details.shippingAddress.line2||'','locality':payload.details.shippingAddress.city,'region':payload.details.shippingAddress.state,'postalCode':payload.details.shippingAddress.postalCode,'countryCodeAlpha2':payload.details.shippingAddress.countryCode,}},success:function(result){if(result.success){if(PAGE_NAME=='pay'){window.location.reload();}else{loadScreen('shipping');setTimeout(function(){window.location=SITE_URL+'/checkout';},250);}}else{loadScreen('shipping');setTimeout(function(){window.location=SITE_URL+'/checkout';},250);}}});}});},onCancel:function(data){console.log('checkout.js payment cancelled',JSON.stringify(data,0,2));},onError:function(err){console.error('checkout.js error',err);}},'#paypal-button').then(function(){});}});});